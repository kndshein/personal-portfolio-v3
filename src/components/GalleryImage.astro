---
import { Image } from 'astro:assets';
import type { ImageType, ImagesType } from '../types/gallery';
import ModalTrigger from './ModalTrigger';

interface Props {
  image: ImageType;
  allImages: ImagesType;
}

const { image, allImages } = Astro.props;
const currImageIndex = allImages.findIndex((currImage) => currImage?.sys.id == image.sys.id);
---

<ModalTrigger
  passedModalData={{ index: currImageIndex, type: 'image', data: allImages }}
  client:only="react"
>
  <Image
    src={`https://${image.fields.file?.url}`}
    alt={image.fields.description || ''}
    width={800}
    inferSize
  />
</ModalTrigger>

<style>
  img {
    display: block;
    height: 100%;
    width: 100%;
  }
</style>
